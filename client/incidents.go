// DO NOT MODIFY: This file is generated by tools/generate.js. Any changes will be overwritten during the next build.

package client

import (
	"fmt"
	"reflect"

	"github.com/google/jsonapi"
	rootlygo "github.com/rootlyhq/terraform-provider-rootly/v2/schema"
)

type Incident struct {
	ID                             string                 `jsonapi:"primary,incidents"`
	Id                             string                 `jsonapi:"attr,id,omitempty"`
	SequentialId                   int                    `jsonapi:"attr,sequential_id,omitempty"`
	Title                          string                 `jsonapi:"attr,title,omitempty"`
	Kind                           string                 `jsonapi:"attr,kind,omitempty"`
	Slug                           string                 `jsonapi:"attr,slug,omitempty"`
	ParentIncidentId               string                 `jsonapi:"attr,parent_incident_id,omitempty"`
	DuplicateIncidentId            string                 `jsonapi:"attr,duplicate_incident_id,omitempty"`
	Summary                        string                 `jsonapi:"attr,summary,omitempty"`
	Private                        *bool                  `jsonapi:"attr,private,omitempty"`
	Source                         string                 `jsonapi:"attr,source,omitempty"`
	Status                         string                 `jsonapi:"attr,status,omitempty"`
	Url                            string                 `jsonapi:"attr,url,omitempty"`
	ShortUrl                       string                 `jsonapi:"attr,short_url,omitempty"`
	PublicTitle                    string                 `jsonapi:"attr,public_title,omitempty"`
	User                           map[string]interface{} `jsonapi:"attr,user,omitempty"`
	Severity                       map[string]interface{} `jsonapi:"attr,severity,omitempty"`
	Environments                   []interface{}          `jsonapi:"attr,environments,omitempty"`
	IncidentTypes                  []interface{}          `jsonapi:"attr,incident_types,omitempty"`
	Services                       []interface{}          `jsonapi:"attr,services,omitempty"`
	Functionalities                []interface{}          `jsonapi:"attr,functionalities,omitempty"`
	Groups                         []interface{}          `jsonapi:"attr,groups,omitempty"`
	Labels                         map[string]interface{} `jsonapi:"attr,labels,omitempty"`
	SlackChannelId                 string                 `jsonapi:"attr,slack_channel_id,omitempty"`
	SlackChannelName               string                 `jsonapi:"attr,slack_channel_name,omitempty"`
	SlackChannelUrl                string                 `jsonapi:"attr,slack_channel_url,omitempty"`
	SlackChannelShortUrl           string                 `jsonapi:"attr,slack_channel_short_url,omitempty"`
	SlackChannelDeepLink           string                 `jsonapi:"attr,slack_channel_deep_link,omitempty"`
	SlackChannelArchived           *bool                  `jsonapi:"attr,slack_channel_archived,omitempty"`
	SlackLastMessageTs             string                 `jsonapi:"attr,slack_last_message_ts,omitempty"`
	ZoomMeetingId                  string                 `jsonapi:"attr,zoom_meeting_id,omitempty"`
	ZoomMeetingStartUrl            string                 `jsonapi:"attr,zoom_meeting_start_url,omitempty"`
	ZoomMeetingJoinUrl             string                 `jsonapi:"attr,zoom_meeting_join_url,omitempty"`
	ZoomMeetingPassword            string                 `jsonapi:"attr,zoom_meeting_password,omitempty"`
	ZoomMeetingPstnPassword        string                 `jsonapi:"attr,zoom_meeting_pstn_password,omitempty"`
	ZoomMeetingH323Password        string                 `jsonapi:"attr,zoom_meeting_h323_password,omitempty"`
	ZoomMeetingGlobalDialInNumbers []interface{}          `jsonapi:"attr,zoom_meeting_global_dial_in_numbers,omitempty"`
	GoogleDriveId                  string                 `jsonapi:"attr,google_drive_id,omitempty"`
	GoogleDriveParentId            string                 `jsonapi:"attr,google_drive_parent_id,omitempty"`
	GoogleDriveUrl                 string                 `jsonapi:"attr,google_drive_url,omitempty"`
	GoogleMeetingId                string                 `jsonapi:"attr,google_meeting_id,omitempty"`
	GoogleMeetingUrl               string                 `jsonapi:"attr,google_meeting_url,omitempty"`
	JiraIssueKey                   string                 `jsonapi:"attr,jira_issue_key,omitempty"`
	JiraIssueId                    string                 `jsonapi:"attr,jira_issue_id,omitempty"`
	JiraIssueUrl                   string                 `jsonapi:"attr,jira_issue_url,omitempty"`
	GithubIssueId                  string                 `jsonapi:"attr,github_issue_id,omitempty"`
	GithubIssueUrl                 string                 `jsonapi:"attr,github_issue_url,omitempty"`
	GitlabIssueId                  string                 `jsonapi:"attr,gitlab_issue_id,omitempty"`
	GitlabIssueUrl                 string                 `jsonapi:"attr,gitlab_issue_url,omitempty"`
	AsanaTaskId                    string                 `jsonapi:"attr,asana_task_id,omitempty"`
	AsanaTaskUrl                   string                 `jsonapi:"attr,asana_task_url,omitempty"`
	LinearIssueId                  string                 `jsonapi:"attr,linear_issue_id,omitempty"`
	LinearIssueUrl                 string                 `jsonapi:"attr,linear_issue_url,omitempty"`
	TrelloCardId                   string                 `jsonapi:"attr,trello_card_id,omitempty"`
	TrelloCardUrl                  string                 `jsonapi:"attr,trello_card_url,omitempty"`
	ZendeskTicketId                string                 `jsonapi:"attr,zendesk_ticket_id,omitempty"`
	ZendeskTicketUrl               string                 `jsonapi:"attr,zendesk_ticket_url,omitempty"`
	PagerdutyIncidentId            string                 `jsonapi:"attr,pagerduty_incident_id,omitempty"`
	PagerdutyIncidentNumber        string                 `jsonapi:"attr,pagerduty_incident_number,omitempty"`
	PagerdutyIncidentUrl           string                 `jsonapi:"attr,pagerduty_incident_url,omitempty"`
	OpsgenieIncidentId             string                 `jsonapi:"attr,opsgenie_incident_id,omitempty"`
	OpsgenieIncidentUrl            string                 `jsonapi:"attr,opsgenie_incident_url,omitempty"`
	OpsgenieAlertId                string                 `jsonapi:"attr,opsgenie_alert_id,omitempty"`
	OpsgenieAlertUrl               string                 `jsonapi:"attr,opsgenie_alert_url,omitempty"`
	ServiceNowIncidentId           string                 `jsonapi:"attr,service_now_incident_id,omitempty"`
	ServiceNowIncidentKey          string                 `jsonapi:"attr,service_now_incident_key,omitempty"`
	ServiceNowIncidentUrl          string                 `jsonapi:"attr,service_now_incident_url,omitempty"`
	MattermostChannelId            string                 `jsonapi:"attr,mattermost_channel_id,omitempty"`
	MattermostChannelName          string                 `jsonapi:"attr,mattermost_channel_name,omitempty"`
	MattermostChannelUrl           string                 `jsonapi:"attr,mattermost_channel_url,omitempty"`
	ConfluencePageId               string                 `jsonapi:"attr,confluence_page_id,omitempty"`
	ConfluencePageUrl              string                 `jsonapi:"attr,confluence_page_url,omitempty"`
	DatadogNotebookId              string                 `jsonapi:"attr,datadog_notebook_id,omitempty"`
	DatadogNotebookUrl             string                 `jsonapi:"attr,datadog_notebook_url,omitempty"`
	ShortcutStoryId                string                 `jsonapi:"attr,shortcut_story_id,omitempty"`
	ShortcutStoryUrl               string                 `jsonapi:"attr,shortcut_story_url,omitempty"`
	ShortcutTaskId                 string                 `jsonapi:"attr,shortcut_task_id,omitempty"`
	ShortcutTaskUrl                string                 `jsonapi:"attr,shortcut_task_url,omitempty"`
	MotionTaskId                   string                 `jsonapi:"attr,motion_task_id,omitempty"`
	MotionTaskUrl                  string                 `jsonapi:"attr,motion_task_url,omitempty"`
	ClickupTaskId                  string                 `jsonapi:"attr,clickup_task_id,omitempty"`
	ClickupTaskUrl                 string                 `jsonapi:"attr,clickup_task_url,omitempty"`
	VictorOpsIncidentId            string                 `jsonapi:"attr,victor_ops_incident_id,omitempty"`
	VictorOpsIncidentUrl           string                 `jsonapi:"attr,victor_ops_incident_url,omitempty"`
	QuipPageId                     string                 `jsonapi:"attr,quip_page_id,omitempty"`
	QuipPageUrl                    string                 `jsonapi:"attr,quip_page_url,omitempty"`
	SharepointPageId               string                 `jsonapi:"attr,sharepoint_page_id,omitempty"`
	SharepointPageUrl              string                 `jsonapi:"attr,sharepoint_page_url,omitempty"`
	AirtableBaseKey                string                 `jsonapi:"attr,airtable_base_key,omitempty"`
	AirtableTableName              string                 `jsonapi:"attr,airtable_table_name,omitempty"`
	AirtableRecordId               string                 `jsonapi:"attr,airtable_record_id,omitempty"`
	AirtableRecordUrl              string                 `jsonapi:"attr,airtable_record_url,omitempty"`
	FreshserviceTicketId           string                 `jsonapi:"attr,freshservice_ticket_id,omitempty"`
	FreshserviceTicketUrl          string                 `jsonapi:"attr,freshservice_ticket_url,omitempty"`
	FreshserviceTaskId             string                 `jsonapi:"attr,freshservice_task_id,omitempty"`
	FreshserviceTaskUrl            string                 `jsonapi:"attr,freshservice_task_url,omitempty"`
	MitigationMessage              string                 `jsonapi:"attr,mitigation_message,omitempty"`
	ResolutionMessage              string                 `jsonapi:"attr,resolution_message,omitempty"`
	CancellationMessage            string                 `jsonapi:"attr,cancellation_message,omitempty"`
	ScheduledFor                   string                 `jsonapi:"attr,scheduled_for,omitempty"`
	ScheduledUntil                 string                 `jsonapi:"attr,scheduled_until,omitempty"`
	MutedServiceIds                []interface{}          `jsonapi:"attr,muted_service_ids,omitempty"`
	RetrospectiveProgressStatus    string                 `jsonapi:"attr,retrospective_progress_status,omitempty"`
	InTriageBy                     map[string]interface{} `jsonapi:"attr,in_triage_by,omitempty"`
	StartedBy                      map[string]interface{} `jsonapi:"attr,started_by,omitempty"`
	MitigatedBy                    map[string]interface{} `jsonapi:"attr,mitigated_by,omitempty"`
	ResolvedBy                     map[string]interface{} `jsonapi:"attr,resolved_by,omitempty"`
	ClosedBy                       map[string]interface{} `jsonapi:"attr,closed_by,omitempty"`
	CancelledBy                    map[string]interface{} `jsonapi:"attr,cancelled_by,omitempty"`
	InTriageAt                     string                 `jsonapi:"attr,in_triage_at,omitempty"`
	StartedAt                      string                 `jsonapi:"attr,started_at,omitempty"`
	DetectedAt                     string                 `jsonapi:"attr,detected_at,omitempty"`
	AcknowledgedAt                 string                 `jsonapi:"attr,acknowledged_at,omitempty"`
	MitigatedAt                    string                 `jsonapi:"attr,mitigated_at,omitempty"`
	ResolvedAt                     string                 `jsonapi:"attr,resolved_at,omitempty"`
	ClosedAt                       string                 `jsonapi:"attr,closed_at,omitempty"`
	CancelledAt                    string                 `jsonapi:"attr,cancelled_at,omitempty"`
}

func (c *Client) ListIncidents(params *rootlygo.ListIncidentsParams) ([]interface{}, error) {
	req, err := rootlygo.NewListIncidentsRequest(c.Rootly.Server, params)
	if err != nil {
		return nil, fmt.Errorf("Error building request: %w", err)
	}

	resp, err := c.Do(req)
	if err != nil {
		return nil, fmt.Errorf("Failed to make request: %w", err)
	}

	incidents, err := jsonapi.UnmarshalManyPayload(resp.Body, reflect.TypeOf(new(Incident)))
	if err != nil {
		return nil, fmt.Errorf("Error unmarshalling: %w", err)
	}

	return incidents, nil
}
